# Linux软件安装基础

## 源码包

安装教程：

### 下载源码包

### 解压缩下载源码包

### 进入解压缩目录

### 运行 ./configure 

这个命令是为了检查当前系统环境是否符合软件安装要求，以及能指定一些参数。<font color="blue">如果成功，则会在当前目录下生成一个 Makefile. 的文件，文件后缀我不确定，只要生成这个文件，就代表当前系统环境符合软件安装。</font>

### 开始编译：make

直接敲

    make

就开始编译了。

### 如果编译失败，清除生成的文件：make clean

### 编译成功后开始安装：make install

## 二进制包：RPM 

RPM包命名规则，以下面为例：

    httpd-2.2.15-15.el6.centos.i686.rpm
    <!-- 
    httpd 软件包名
    2.2.15 软件版本
    15 软件发布次数
    e16.centos 适合的Linux平台
    i686 适合的硬件平台
    rpm 扩展名
     -->

### RPM安装：rpm [选项] 包全名

选项：

- -i install，安装
- -v verbose，显示详细安装信息
- -h hash，显示进度

### RPM升级：rpm -U 包全名

- -U Upgrade，升级

也可以加上别的选项，如：

    rpm -Uvh 包全名

<font color="blue">如果这个包之前没有安装过，那么执行升级命令就等于执行安装命令。</font>

### RPM卸载：rpm -e 包名

- -e erase，卸载

### RPM查询安装RPM包名：rpm -q 包名

- -q query，查询确定包名

或者也可以执行：

    rpm -qa
    <!-- -a all -->

查询全部通过rpm安装的包。

RPM安装的软件的信息都在

    /var/lib/rpm

这个目录下。

### 查询RPM安装包信息：rpm -qi 包名

- -i information，信息

或者也可以使用

    rpm -qai
    <!-- 查询所有软件包信息 -->

查询未安装的软件包信息：

    rpm -qpi 包全名
    <!-- -p package，包 -->

### 查询安装包内部文件：rpm -ql 包全名

如果是未安装的包：

    rpm -qlp 包全名

### 查询文件所属的RPM包：rpm -qf 文件名

- -f file

这个文件是由于rpm安装所产生的才能查到。

### 该RPM包依赖包：rpm -qR 包全名

### 校验RPM包：rpm -V 已安装包名

- -V verify，校验

如果RPM包安装后被人修改过，那么通过该校验方式就可以查看被的修改文件，和大致修改的方式。如：

    S.5....T c 文件目录/被修改文件

这里的S.5....T是验证信息，有8种类型：

- S：文件大小是否改变
- M：文件类型或者权限是否改变
- 5：MD5校验和是否改变，也就是文件内容是否改变
- D：文件主从代码是否改变
- L：文件路径是否改变
- U：文件的所有者是否改变
- G：文件的所属组是否改变
- T：文件的修改时间是否改变

有改变的会显示，没有改变的只显示 . 。

还有这里的 c 代表文件类型，别的还有：

- c config 配置文件
- d documentation，普通文件
- g gost 鬼文件？表示该文件本来不应该在这个目录下的
- L license 授权文件
- r read 描述文件

### 从RPM包中提取文件：rpm2cpio 包全名 | cpio -idv .文件绝对路径

这个适用在把重要系统文件误删的情况下，从rpm包中恢复该文件。

rpm2cpio 将RPM包转换成cpio格式的命令。

命令中的 cpio 是一个标准工具，它用于创建软件档案文件和从档案文件中提取文件。

cpio 命令中的选项：

- -i copy-in模式，表示还原
- -d 还原时自动新建目录
- -v 显示还原过程

## yum安装

### yum在线安装

yum源配置文件在

    /etc/yum.repos.d/

下，如果没有这个目录，那么就手动创建一个，并在这个目录下创建一个以 .repo 为结尾的文件，并修改这个文件就可以创建yum源了，这个文件的格式如下：

    [Server]
       name=Server      
       <!-- 服务器的名称 -->
       baseurl=你的yum源地址    
       <!-- yum库的文件地址 -->
       enable=1                      
       <!-- 应用此服务器 -->
       <!-- gpgcheck=0           -->
       <!-- 关闭验证，这个不写也没关系 -->

之后就可以执行

    yum list

查看安装的yum源是否能正常工作。

### 切换成光盘yum源

在刚才的目录里其实保存的是配置文件，所以只要修改baseurl的地址，切换成光盘的挂载点就可以了。其余部分不用改变。

### yum安装：yum [选项] 包名

选项：

- install 安装
- -y 自动安装

### yum升级：yum -y update 包名

### yum卸载：yum -y remove 包名

这个卸载很危险，会把相依赖的文件都删除掉，而且不管这个文件是不是别的文件也需要的，所以一般情况下使用yum卸载，我就被坑过，幸好最后被我装回来了。




